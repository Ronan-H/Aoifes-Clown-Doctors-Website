<!DOCTYPE html>

<html>
	
	<head>
		<meta charset="UTF-8">
		<title>Gallery</title>
		<link rel = "stylesheet" type = "text/css" href = "style.css" />
		<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
		<meta name="viewport" content="width=device-width, initial-scale=1">
	</head>
	
	<body onload="load()">
		<div id="header">
			<img id="header-img" src="images/facebook_page_img.jpg" />
		</div>
		
		<div id="main-panel">
			<div id="menu-bar">
				<a href="index.html">Home</a>
				<a href="about_us.html">About us</a>
				<a href="our_clowns.html">Meet the Clown Doctors</a>
				<a href="testimonials.html">Testimonials</a>
				<a href="sponsorship.html">Sponsorship</a>
				<a href="events.html">Events</a>
				<span id="current-page">Gallery</span>
				<a href="contact.html">Contact us</a>
				<a href="governance.html">Governance</a>
			</div>
			
			<div id="main-panel-content">
				<h1 id="gallery-helper-heading">Mouseover or click an image to enlarge/focus it</h1>
				<div id="gallery-images">
					<table id="gallery-table">
						
					</table>
				</div>
			</div>
		</div>
		
		<script>
			var imgSrc;
			var enlargedSrc;
			var img;
			
			var images = [];
			var imgSrcArr = [];
			var enlargedSrcArr = [];
			
			function load() {
				// create all the image elements
				var numImages = 34;
				var imagesUsed = 0;
				var tableWidth = 1;
				var rootImgsDir = "images/gallery_images/"; 
				var currentTableRow;
				
				currentTableRow = document.createElement("tr");
				
				for (var imgNum = 1; imgNum <= 34; ++imgNum) {
					imgSrc = rootImgsDir + "thumbs/gallery_img_thumb" + imgNum + ".jpg";
					enlargedSrc = rootImgsDir + "gallery_img" + imgNum + ".jpg";
					img = document.createElement("img");
					
					images.push(img);
					imgSrcArr.push(imgSrc);
					enlargedSrcArr.push(enlargedSrc);
					
					img.id = "img" + imgNum;
					
					(function () {
						var imgIndex = imgNum - 1;
						img.addEventListener("mouseover", function () {enlargeImage(imgIndex)});
					}());
					
					var td = document.createElement("td");
					
					//var para = document.createElement("p");
					//para.appendChild(document.createTextNode("test"));
					//td.appendChild(para);
					
					td.appendChild(img);
					currentTableRow.appendChild(td);
					
					++imagesUsed;
					
					if (imagesUsed % tableWidth == 0) {
						// add the last row to the page
						if (imagesUsed != 0) document.getElementById("gallery-table").appendChild(currentTableRow);
						
						// create a new table row
						currentTableRow = document.createElement("tr");
						// currentTableRow.id = "gallery-row-" + (imagesUsed % 4 - 1);
					}
					
					img.src = imgSrc;
				}
				
				if ((imagesUsed - 1) % tableWidth != 0) {
					// add the last row to the page
					if (imagesUsed != 0) document.getElementById("gallery-table").appendChild(currentTableRow);
					
					// create a new table row
					currentTableRow = document.createElement("tr");
					// currentTableRow.id = "gallery-row-" + (imagesUsed % 4 - 1);
				}
			}
			
			function enlargeImage(imgNum) {
				console.log("enlarging image " + imgNum);
				
				sessionStorage.setItem("enlargedThumbSrc", images[imgNum].src);
				images[imgNum].src = enlargedSrcArr[imgNum];
				sessionStorage.setItem("enlargedId", images[imgNum].id);
				images[imgNum].width = "600";
			}
		</script>
	</body>
	
</html>
